<!-- Moved to public directory for Cloudflare Workers static site bucket -->
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>QuickDiff ‚Äî Offline & Instant Code Compare</title>
    <meta name="description" content="Offline code comparison tool with instant diff visualization" />
    <meta name="theme-color" content="#1e1e1e" />
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
    <meta name="apple-mobile-web-app-title" content="QuickDiff" />
    <link rel="manifest" href="./manifest.json" />
    <link rel="icon" type="image/png" href="icon/quickdiff_icon_x512.png" />
    <link rel="stylesheet" href="styles.css" />
    <script src="https://cdn.jsdelivr.net/npm/monaco-editor@0.52.2/min/vs/loader.min.js"></script>
  </head>
  <body>
    <!-- Original content preserved -->
    <!-- ================================================ -->
    <div class="topbar">
      <div class="title">QuickDiff</div>
      <div class="toolbar-section">
        <button class="btn" id="swapBtn" title="Swap left/right">‚áÑ Swap</button>
        <button class="btn ghost" id="clearBtn" title="Clear both">‚úï Clear</button>
      </div>
      <div class="toolbar-separator"></div>
      <div class="toolbar-section">
        <div class="setting-group">
          <span class="setting-label">Layout:</span>
          <select id="layout">
            <option value="side">Side-by-side</option>
            <option value="inline">Inline</option>
          </select>
        </div>
      </div>
      <div class="toolbar-section">
        <div class="setting-group">
          <span class="setting-label">Whitespace:</span>
          <select id="ws">
            <option value="keep">Respect</option>
            <option value="trim">Ignore</option>
          </select>
        </div>
      </div>
      <div class="toolbar-section">
        <div class="setting-group">
          <span class="setting-label">Wrap:</span>
          <select id="wrap">
            <option value="off">Off</option>
            <option value="on">On</option>
          </select>
        </div>
      </div>
      <div class="toolbar-section">
        <div class="setting-group">
          <span class="setting-label">Mode:</span>
          <select id="readonly">
            <option value="edit">Edit</option>
            <option value="readonly">Read-only</option>
          </select>
        </div>
      </div>
      <div class="diff-stats" id="diffStats">
        <span class="additions">+0</span> <span class="deletions">-0</span>
      </div>
      <div class="spacer"></div>
      <div class="toolbar-section">
        <div class="setting-group">
          <span class="setting-label">Language:</span>
          <button class="btn" id="languageBtn" title="Change Language Mode">JavaScript</button>
        </div>
      </div>
      <div class="toolbar-section">
        <button class="btn" id="importBtn" title="Import .qdiff file">üìÅ Import</button>
        <button class="btn" id="formatBtn" title="Format both sides">‚ö° Format</button>
        <button class="btn" id="shareBtn" title="Share via URL">üîó Share</button>
        <button class="btn" id="downloadBtn" title="Download as patch">üíæ Patch</button>
        <button class="btn ghost" id="helpBtn" title="Keyboard shortcuts">‚ùì</button>
      </div>
      <div class="toolbar-section">
        <button class="fullscreen-btn" id="fullscreenBtn" title="Toggle fullscreen mode">
          <span id="fullscreenIcon">‚õ∂</span>
        </button>
      </div>
    </div>
    <div id="dropzones">
      <div class="drop" id="dropL">
        <div>
          <b>Left (Original)</b><br />
          <small>Drop a file ‚Ä¢ or paste ‚Ä¢ or <u>load</u></small>
        </div>
        <div class="controls">
          <input type="file" id="fileL" style="display: none" />
          <button class="btn" id="loadL">Load</button>
          <button class="btn" id="pasteL">Paste</button>
        </div>
      </div>
      <div class="drop" id="dropR">
        <div>
          <b>Right (Modified)</b><br />
          <small>Drop a file ‚Ä¢ or paste ‚Ä¢ or <u>load</u></small>
        </div>
        <div class="controls">
          <input type="file" id="fileR" style="display: none" />
          <button class="btn" id="loadR">Load</button>
          <button class="btn" id="pasteR">Paste</button>
        </div>
      </div>
    </div>
    <div id="diff"></div>
    <div class="minimap-toggle" id="minimapToggle" title="Toggle mini-map">üìç Map</div>
    <div class="fullscreen-overlay">
      <button class="fullscreen-btn" id="exitFullscreenBtn" title="Exit fullscreen mode">
        <span>‚úï</span>
      </button>
    </div>
    <div class="share-modal" id="shareModal">
      <div class="share-content">
        <button class="close-btn" id="closeShareBtn">‚úï</button>
        <h3>üîó Share Diff</h3>
        <div class="share-option" id="urlOption">
          <input type="radio" name="shareMethod" value="url" id="urlRadio" checked>
          <div class="share-option-content">
            <div class="share-option-title">Share via URL</div>
            <div class="share-option-description">Generate a shareable link that contains your diff data. Recipients can view immediately by clicking the link.</div>
            <div class="share-option-info" id="urlInfo">Calculating size...</div>
            <div class="url-preview" id="urlPreview" style="display: none;"></div>
          </div>
        </div>
        <div class="share-option" id="exportOption">
          <input type="radio" name="shareMethod" value="export" id="exportRadio">
          <div class="share-option-content">
            <div class="share-option-title">Export as File</div>
            <div class="share-option-description">Download a .qdiff file that can be imported later. Useful for large diffs or offline sharing.</div>
            <div class="share-option-info share-option-success">‚úì No size limits ‚Ä¢ Works offline ‚Ä¢ Can be version controlled</div>
          </div>
        </div>
        <div class="share-buttons">
          <button class="btn ghost" id="cancelShareBtn">Cancel</button>
          <button class="btn primary" id="proceedShareBtn">Copy URL</button>
        </div>
      </div>
    </div>
    <div class="help-modal" id="helpModal">
      <div class="help-content">
        <button class="close-btn" id="closeHelpBtn">‚úï</button>
        <h3>‚å®Ô∏è Keyboard Shortcuts</h3>
        <div class="shortcut"><span>Toggle fullscreen</span><span class="key">F11</span></div>
        <div class="shortcut"><span>Toggle fullscreen</span><span class="key">Ctrl+Shift+F</span></div>
        <div class="shortcut"><span>Exit fullscreen</span><span class="key">Esc</span></div>
        <div class="shortcut"><span>Format document</span><span class="key">Shift+Alt+F</span></div>
        <div class="shortcut"><span>Find</span><span class="key">Ctrl+F</span></div>
        <div class="shortcut"><span>Replace</span><span class="key">Ctrl+H</span></div>
        <div class="shortcut"><span>Go to line</span><span class="key">Ctrl+G</span></div>
        <div class="shortcut"><span>Select all</span><span class="key">Ctrl+A</span></div>
        <div class="shortcut"><span>Toggle comment</span><span class="key">Ctrl+/</span></div>
        <div class="shortcut"><span>Zoom in</span><span class="key">Ctrl++</span></div>
        <div class="shortcut"><span>Zoom out</span><span class="key">Ctrl+-</span></div>
        <div class="shortcut"><span>Show this help</span><span class="key">?</span></div>
      </div>
    </div>
    <div class="edit-confirmation-modal" id="editConfirmationModal">
      <div class="edit-confirmation-content">
        <h3>üîì Enable Edit Mode</h3>
        <p>This will switch from read-only mode to edit mode and remove the share link from the URL. You'll be able to modify the content, but the shared link will no longer work.</p>
        <div class="edit-confirmation-buttons">
          <button class="btn ghost" id="cancelEditBtn">Cancel</button>
          <button class="btn primary" id="proceedEditBtn">Enable Editing</button>
        </div>
      </div>
    </div>
    <script src="script.js"></script>
  </body>
</html>
